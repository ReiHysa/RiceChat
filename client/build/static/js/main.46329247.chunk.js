(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(24),r=n.n(c),s=(n(29),n(3)),o=n(10),i=n(5),u=n(6),l=n(4),j=n.n(l),h=n(2),p=n(11),b=function(){return window.localStorage.getItem("token")},d=function(){return window.localStorage.getItem("id")},f=n(0),O=function(e){var t=e.name,n=e.type,a=e.placeholder,c=e.data,r=e.handleFormChange;return Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("input",{placeholder:a,type:n,id:t,name:t,value:c[t],onChange:r,className:"message-submit"})})},m=n(9),v=n.n(m),x=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://rice-chat.herokuapp.com/api/",headers:{"Content-Type":"application/json"}},e.next=3,v()(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"delete",url:"https://rice-chat.herokuapp.com/api/messages/".concat(t,"/"),headers:{"Content-Type":"application/json"}},e.next=3,v()(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"delete",url:"https://rice-chat.herokuapp.com/api/chats/".concat(t,"/"),headers:{"Content-Type":"application/json"}},e.next=3,v()(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://rice-chat.herokuapp.com/api/chats/",headers:{"Content-Type":"application/json"}},e.next=3,v()(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"get",url:"https://rice-chat.herokuapp.com/api/".concat(t,"/"),headers:{"Content-Type":"application/json"}},e.next=3,v()(n);case 3:return a=e.sent,e.abrupt("return",a.data.chats);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"get",url:"https://rice-chat.herokuapp.com/api/chats/".concat(t,"/"),headers:{"Content-Type":"application/json"}},e.next=3,v()(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"get",url:"https://rice-chat.herokuapp.com/api/messages/",headers:{"Content-Type":"application/json"}},e.next=3,v()(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("chats/".concat(n),t));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"post",url:"https://rice-chat.herokuapp.com/api/messages/",headers:{Authorization:"Bearer ".concat(b()),"Content-Type":"application/json"},data:t},e.next=3,v()(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"post",url:"https://rice-chat.herokuapp.com/api/".concat(t,"/chats/"),headers:{Authorization:"Bearer ".concat(b()),"Content-Type":"application/json"}},e.next=3,v()(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(j.a.mark((function e(t,n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"post",url:"https://rice-chat.herokuapp.com/api/".concat(t,"/"),headers:{"Content-Type":"application/json"},data:n},e.next=3,v()(a);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("login",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("register",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(j.a.mark((function e(t,n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=B(t,n),e.next=3,v()(a);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",a={method:n,url:"https://rice-chat.herokuapp.com/api/".concat(e,"/"),headers:{"Content-Type":"application/json"},data:t};return a},R=function(e){var t=e.setIsLoggedIn,n=Object(a.useState)({username:"",email:"",password:""}),c=Object(s.a)(n,2),r=c[0],l=c[1],d=Object(a.useState)(!1),m=Object(s.a)(d,2),v=m[0],x=m[1],g=Object(h.f)();Object(a.useEffect)((function(){null!==b()&&g("/home")}),[]);var w=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),F(r).then(N).catch(y);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var n,a;n="Bearer ".concat(e.token),window.localStorage.setItem("token",n),a=e.id,window.localStorage.setItem("id",a),t(!0),g("/")},y=function(e){e.response&&x(!0)},k={data:r,handleFormChange:function(e){var t=e.target,n=t.name,a=t.value;l(Object(i.a)(Object(i.a)({},r),{},Object(o.a)({},n,a)))}};return Object(f.jsx)("div",{className:"holder",children:Object(f.jsx)("section",{className:"login",children:Object(f.jsxs)("form",{onSubmit:w,className:"login-form",method:"post",children:[Object(f.jsx)("h1",{className:"title",children:"RiceChat"}),Object(f.jsx)(O,Object(i.a)({placeholder:"Username",type:"text",name:"username"},k)),Object(f.jsx)(O,Object(i.a)({placeholder:"Email",type:"email",name:"email"},k)),Object(f.jsx)(O,Object(i.a)({placeholder:"password",type:"password",name:"password"},k)),Object(f.jsx)("div",{className:"sub-hold",children:Object(f.jsx)("input",{type:"submit",value:"Login",className:"submit-button"})}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(p.b,{to:"/register",className:"login-link a",style:{textDecoration:"none"},children:"No account? Click here to register!"})}),v?Object(f.jsx)("div",{className:"error",children:Object(f.jsx)("p",{children:"Error. Please try again."})}):Object(f.jsx)(f.Fragment,{})]})})})},_=function(){var e=Object(a.useState)({username:"",email:"",password:"",password_confirmation:""}),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),l=Object(s.a)(r,2),b=l[0],d=l[1],m=Object(h.f)(),v=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),D(n).then(x).catch(g);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){d(!1),m("/login")},g=function(e){e.response&&d(!0)},w={data:n,handleFormChange:function(e){var t=e.target,a=t.name,r=t.value;c(Object(i.a)(Object(i.a)({},n),{},Object(o.a)({},a,r)))}};return Object(f.jsx)("div",{className:"holder",children:Object(f.jsx)("section",{className:"login",children:Object(f.jsxs)("form",{onSubmit:v,className:"login-form reg",children:[Object(f.jsx)("h1",{className:"title",children:"RiceChat"}),Object(f.jsx)(O,Object(i.a)({placeholder:"username",type:"text",name:"username"},w)),Object(f.jsx)(O,Object(i.a)({placeholder:"email",type:"email",name:"email"},w)),Object(f.jsx)(O,Object(i.a)({placeholder:"password",type:"password",name:"password"},w)),Object(f.jsx)(O,Object(i.a)({placeholder:"Confirm Password",type:"password",name:"password_confirmation"},w)),Object(f.jsx)("div",{className:"sub-hold",children:Object(f.jsx)("input",{type:"submit",value:"Register",className:"submit-button"})}),Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(p.b,{to:"/login",className:"login-link a",style:{textDecoration:"none"},children:"Have an account? Click here to login!"})}),b?Object(f.jsx)("div",{className:"error",children:Object(f.jsx)("p",{children:"Error. Please try again."})}):Object(f.jsx)(f.Fragment,{})]})})})},P=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(s.a)(r,2),i=o[0],l=o[1],h=Object(a.useState)(null),p=Object(s.a)(h,2),b=p[0],O=p[1],m=Object(a.useState)(null),v=Object(s.a)(m,2),g=v[0],w=v[1],y=Object(a.useState)(null),k=Object(s.a)(y,2),S=k[0],C=k[1],E=Object(a.useState)(null),F=Object(s.a)(E,2),D=F[0],L=F[1];Object(a.useEffect)((function(){b&&(N().then(w),console.log(b))}),[b]),Object(a.useEffect)((function(){if(g&&g.length>0){var e=g[g.length-1];N().then(w),T(Number(d()),Number(e.id)).then(C),T(e.users[0].id,Number(e.id)).then(L),setInterval((function(){window.location.reload()}),100)}}),[g]),Object(a.useEffect)((function(){D&&S&&(console.log(D),console.log(S))}),[D]);var B=function(){var e=Object(u.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,console.log(n),c(n),x().then((function(e){var t=e.filter((function(e){return e.username.toLowerCase().includes(n.toLowerCase())}));l(""===n?[]:t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t=Number(e.target.id);console.log(t),I(t),N().then(O)};return Object(f.jsxs)("div",{className:"search-container",children:[Object(f.jsx)("div",{className:"search",children:Object(f.jsx)("div",{className:"searchInput",children:Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log("submitted")},children:Object(f.jsx)("input",{type:"text",placeholder:"Create new chat?",value:n,onChange:B,className:"searching-bar"})})})}),Object(f.jsx)("div",{className:"search-results",children:0!==i.length&&Object(f.jsx)("div",{className:"data-results",children:i.map((function(e){return Object(f.jsx)("li",{className:"data-item",onClick:R,value:e,id:e.id,children:e.username},e.id)}))})})]})},z=function(){var e=Object(h.f)();return Object(f.jsx)("div",{children:Object(f.jsx)("ul",{children:Object(f.jsx)("li",{onClick:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("id"),console.log("REMOVED"),e("/login")},children:"Logout"})})})},A=function(e){var t=Object(h.f)(),n=e.users.filter((function(e){return!d().includes(e.id)})),a=function(e){t("/chat/".concat(e.target.classList[0]))};return Object(f.jsxs)("div",{className:"containers-container",children:[Object(f.jsx)("div",{className:"".concat(e.id," container"),onClick:a,children:Object(f.jsxs)("div",{className:"".concat(e.id," group-one"),children:[Object(f.jsx)("div",{className:"".concat(e.id," circle")}),Object(f.jsx)("h1",{className:e.id,onClick:a,id:"chat-list-names",children:n[0].username})]})}),Object(f.jsx)("div",{className:"".concat(e.id," delete-chat"),onClick:function(e){var t=Number(e.target.classList[0]);console.log(t),confirm("You sure you want to delete this chat?")&&w(t)},children:Object(f.jsx)("p",{className:e.id,children:"X"})})]})},H=(n(50),function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),o=Object(s.a)(r,2),u=o[0],l=o[1],j=Object(a.useState)(null),p=Object(s.a)(j,2),O=p[0],m=p[1],v=Object(a.useState)(null),x=Object(s.a)(v,2),g=x[0],w=x[1],k=Object(h.f)();Object(a.useEffect)((function(){null!==n&&null!==u&&setInterval((function(){N().then(l),n.length!==u.length&&window.location.reload()}),2e3)}),[u]);return Object(a.useEffect)((function(){null===b()&&k("/login"),N().then(c),N().then(l),n||N().then(c)}),[]),Object(a.useEffect)((function(){if(n){var e=d();y(Number(e)).then(m)}}),[n]),Object(a.useEffect)((function(){if(O){var e=n.filter((function(e){return O.includes(e.id)}));w(e)}}),[O]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("header",{children:[Object(f.jsx)("section",{className:"logo",children:Object(f.jsx)("h1",{children:"RiceChat \ud83c\udf5a"})}),Object(f.jsx)(z,{})]}),Object(f.jsx)("div",{className:"search-div",children:Object(f.jsx)(P,{})}),Object(f.jsx)("div",{className:"complete-container",children:g?Object(f.jsx)("section",{className:"chat-selector",children:g.map((function(e){return Object(f.jsx)(f.Fragment,{children:Object(a.createElement)(A,Object(i.a)(Object(i.a)({},e),{},{key:g.id}))})}))}):Object(f.jsx)(f.Fragment,{})})]})}),J=function(e){var t=new Date(e.message_datetime),n="".concat(t.getHours()," : ").concat(t.getMinutes()),c=Object(a.useState)(null),r=Object(s.a)(c,2),o=r[0],i=r[1];Object(a.useEffect)((function(){e.owner.id!==Number(d())?i(!0):i(!1)}),[]);return Object(f.jsxs)("div",{className:"messageBox ".concat(o?"other":""),children:[Object(f.jsxs)("div",{id:e.owner.id,className:"message-box-container ".concat(o?"otherUser":""),children:[Object(f.jsx)("p",{children:e.owner.username}),Object(f.jsx)("p",{children:e.message_text}),Object(f.jsx)("p",{children:n})]}),Object(f.jsx)("div",{className:"delete-box ".concat(o?"other-delete":""),children:Object(f.jsx)("p",{className:e.id,onClick:function(e){var t=Number(e.target.className);confirm("You sure you want to delete this message?")&&g(t)},children:"X"})})]})},M=(n(51),function(){var e=Object(h.g)().id,t=Object(a.useState)(null),n=Object(s.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(null),l=Object(s.a)(u,2),j=l[0],p=l[1],m=Object(a.useState)([]),v=Object(s.a)(m,2),x=v[0],g=v[1],w=Object(a.useState)([]),N=Object(s.a)(w,2),y=N[0],I=N[1],T=Object(a.useState)(null),F=Object(s.a)(T,2),D=F[0],L=F[1],B=d(),R=Object(a.useState)(null),_=Object(s.a)(R,2),P=_[0],z=_[1],A=Object(a.useState)([]),H=Object(s.a)(A,2),M=H[0],U=H[1],X=Object(a.useState)(null),Y=Object(s.a)(X,2),G=Y[0],V=Y[1],q=Object(h.f)(),K=Object(a.useState)(null),Q=Object(s.a)(K,2),W=Q[0],Z=Q[1],$=Object(a.useState)({}),ee=Object(s.a)($,2),te=ee[0],ne=ee[1];Object(a.useEffect)((function(){null===b()&&q("/login"),function(){k(e).then(p);var t=setInterval((function(){k(e).then(Z)}),1e3)}()}),[]),Object(a.useEffect)((function(){if(j){var e=j.message;r(e)}}),[j]),Object(a.useEffect)((function(){if(W){if(W&&c){var e=setInterval((function(){W.message.length!==c.length&&window.location.reload(!0)}),1e3);return function(){return clearInterval(e)}}if(null!==c)if(void 0!==c){g([]),I([]);var t=0;for(t=0;t<c.length;t++){c[t].owner.id===Number(B)?x.push(c[t]):y.push(c[t])}}else window.location.reload(!0)}}),[c,W]),Object(a.useEffect)((function(){if(P){U([]);var e=0;for(e=0;e<P.length;e++){P[e].owner.id===Number(B)&&M.push(P[e])}if(M.length>0){var t=M[M.length-1].id;V(t)}}}),[P]),Object(a.useEffect)((function(){G&&C(G,e).then(p)}),[G]);Object(a.useEffect)((function(){D&&S().then(z)}),[D]);var ae=function(e){var t=e.target,n=t.name,a=t.value;ne(Object(i.a)(Object(i.a)({},te),{},Object(o.a)({},n,a)))},ce={data:te,handleType:ae};return Object(f.jsxs)("div",{className:"background",children:[Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),q("/")},className:"back-button",children:"Go Back To Chats"}),c?Object(f.jsx)(f.Fragment,{children:c.map((function(e){return Object(a.createElement)(J,Object(i.a)(Object(i.a)({},e),{},{key:e.id}))}))}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),E(te).then(L)},onChange:ae,className:"message-form",children:Object(f.jsx)(O,Object(i.a)({placeholder:"Type message",type:"text",name:"message_text"},ce))})]})});var U=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){b()?c(!0):c(!1)}),[]),Object(f.jsx)(p.a,{children:Object(f.jsxs)("body",{children:[Object(f.jsx)("headers",{}),Object(f.jsx)("main",{children:Object(f.jsxs)(h.c,{children:[Object(f.jsx)(h.a,{path:"/chat/:id",element:Object(f.jsx)(M,{})}),Object(f.jsx)(h.a,{path:"/login",element:Object(f.jsx)(R,{isLoggedIn:n,setIsLoggedIn:c})}),Object(f.jsx)(h.a,{path:"/register",element:Object(f.jsx)(_,{})}),Object(f.jsx)(h.a,{path:"/",element:Object(f.jsx)(H,{})})]})})]})})};r.a.render(Object(f.jsx)(U,{}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.46329247.chunk.js.map